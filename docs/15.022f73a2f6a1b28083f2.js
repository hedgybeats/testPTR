(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Wu66:function(c,i,t){"use strict";t.r(i),t.d(i,"ViewInvoicesModule",function(){return uc}),t.d(i,"ViewInvoicesComponent",function(){return sc}),t.d(i,"ViewInvoicesRoutingModule",function(){return ac});var e=t("tyNb"),n=t("mrSG"),o=t("Edqf"),s=t("fXoL"),b=t("3Pt+"),a=t("U7T7"),r=t("J9tS"),u=t("8I6g"),v=t("Wp6s"),f=t("QibW"),d=t("ofXK"),m=t("kmnG"),l=t("qFsG"),I=t("bTqV"),p=t("d3UM"),T=t("FKr1"),h=t("iadO"),B=t("VzXK");let U=(()=>{class c{transform(c,i,t,e){if(null==i)return[];switch(t){case B.e.InvoiceNumber:var n=c.filter(function(c){return c.invoiceNumber.toString().toLowerCase().includes(i)});break;case B.e.PaymentStatus:n=[],c.forEach(c=>{c.paid==i&&n.push(c)});break;case B.e.InvoiceType:n=[],c.forEach(c=>{c.invoiceType==i&&n.push(c)});break;case B.e.Date:n=[],c.forEach(c=>{var t=new Date(c.invoiceDate);t.setHours(0,0,0,0),i.setHours(0,0,0,0),t.getTime()==i.getTime()&&n.push(c)});break;case B.e.Business:n=[],c.forEach(c=>{c.businessId==i&&n.push(c)});break;case B.e.Customer:n=[],c.forEach(c=>{c.customerId==i&&n.push(c)});break;default:n=[]}return n}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275pipe=s.Nb({name:"searchInvoices",type:c,pure:!0}),c})();function g(c,i){1&c&&(s.Ub(0,"div"),s.Kc(1," Payment Recieved "),s.Tb())}function y(c,i){if(1&c){const c=s.Vb();s.Ub(0,"button",18),s.fc("click",function(){s.Ac(c);const i=s.jc().$implicit;return s.jc(2).PaymentRecieved(i.id)}),s.Kc(1,"Mark as Paid"),s.Tb()}}function w(c,i){if(1&c){const c=s.Vb();s.Ub(0,"mat-card",15),s.Ub(1,"div"),s.Ub(2,"b",16),s.fc("click",function(){s.Ac(c);const t=i.$implicit;return s.jc(2).ViewInvoice(t.id)}),s.Kc(3),s.Tb(),s.Tb(),s.Ub(4,"div"),s.Kc(5),s.Tb(),s.Ic(6,g,2,0,"div",9),s.Ic(7,y,2,0,"button",17),s.Tb()}if(2&c){const c=i.$implicit;s.Bb(3),s.Mc("INV. ",c.invoiceNumber,""),s.Bb(2),s.Lc(c.invoiceDate),s.Bb(1),s.qc("ngIf",1==c.paid),s.Bb(1),s.qc("ngIf",0==c.paid)}}function k(c,i){if(1&c&&(s.Ub(0,"div"),s.Ub(1,"div",10),s.Ub(2,"mat-form-field",11),s.Ub(3,"mat-label"),s.Kc(4,"Invoice Number"),s.Tb(),s.Ub(5,"span",12),s.Kc(6,"INV. \xa0"),s.Tb(),s.Pb(7,"input",13),s.Tb(),s.Tb(),s.Ic(8,w,8,4,"mat-card",14),s.kc(9,"searchInvoices"),s.Tb()),2&c){const c=s.jc();s.Bb(8),s.qc("ngForOf",s.nc(9,1,c.invoiceList,c.InvoiceNumber,c.searchBy))}}function K(c,i){if(1&c&&(s.Ub(0,"mat-option",23),s.Kc(1),s.Tb()),2&c){const c=i.$implicit;s.qc("value",c.value),s.Bb(1),s.Mc(" ",c.viewValue," ")}}function q(c,i){if(1&c&&(s.Ub(0,"div"),s.Kc(1),s.Tb()),2&c){const c=s.jc().$implicit;s.Bb(1),s.Mc("Total Invoices: ",c,"")}}function j(c,i){if(1&c&&(s.Ub(0,"div"),s.Ic(1,q,2,1,"div",9),s.Tb()),2&c){const c=i.$implicit;s.Bb(1),s.qc("ngIf",0!=c)}}function V(c,i){1&c&&(s.Ub(0,"div"),s.Kc(1," Payment Recieved "),s.Tb())}function F(c,i){if(1&c){const c=s.Vb();s.Ub(0,"button",18),s.fc("click",function(){s.Ac(c);const i=s.jc().$implicit;return s.jc(2).PaymentRecieved(i.Id)}),s.Kc(1,"Mark as Paid"),s.Tb()}}function N(c,i){if(1&c){const c=s.Vb();s.Ub(0,"mat-card",24),s.Ub(1,"div"),s.Ub(2,"b",16),s.fc("click",function(){s.Ac(c);const t=i.$implicit;return s.jc(2).ViewInvoice(t.Id)}),s.Kc(3),s.Tb(),s.Tb(),s.Ub(4,"div"),s.Kc(5),s.Tb(),s.Ic(6,V,2,0,"div",9),s.Ic(7,F,2,0,"button",17),s.Tb()}if(2&c){const c=i.$implicit;s.Bb(3),s.Mc("INV. ",c.invoiceNumber,""),s.Bb(2),s.Lc(c.invoiceDate),s.Bb(1),s.qc("ngIf",1==c.paid),s.Bb(1),s.qc("ngIf",0==c.paid)}}function $(c,i){if(1&c&&(s.Ub(0,"div"),s.Ub(1,"div",10),s.Ub(2,"mat-form-field",11),s.Ub(3,"mat-label"),s.Kc(4,"Payment Status"),s.Tb(),s.Ub(5,"mat-select",19),s.Ic(6,K,2,2,"mat-option",20),s.Tb(),s.Tb(),s.Ic(7,j,2,1,"div",21),s.kc(8,"searchInvoices"),s.Tb(),s.Ic(9,N,8,4,"mat-card",22),s.kc(10,"searchInvoices"),s.Tb()),2&c){const c=s.jc();s.Bb(6),s.qc("ngForOf",c.constants.paymentStatus),s.Bb(1),s.qc("ngForOf",c.GetTotalInvoices(s.nc(8,3,c.invoiceList,c.PaymentMethod,c.searchBy))),s.Bb(2),s.qc("ngForOf",s.nc(10,7,c.invoiceList,c.PaymentStatus,c.searchBy))}}function L(c,i){if(1&c&&(s.Ub(0,"div"),s.Kc(1),s.Tb()),2&c){const c=s.jc().$implicit;s.Bb(1),s.Mc("Total Invoices: ",c,"")}}function M(c,i){if(1&c&&(s.Ub(0,"div"),s.Ic(1,L,2,1,"div",9),s.Tb()),2&c){const c=i.$implicit;s.Bb(1),s.qc("ngIf",0!=c)}}function O(c,i){1&c&&(s.Ub(0,"div"),s.Kc(1," Payment Recieved "),s.Tb())}function P(c,i){if(1&c){const c=s.Vb();s.Ub(0,"button",18),s.fc("click",function(){s.Ac(c);const i=s.jc().$implicit;return s.jc(2).PaymentRecieved(i.Id)}),s.Kc(1,"Mark as Paid"),s.Tb()}}function C(c,i){if(1&c){const c=s.Vb();s.Ub(0,"mat-card",24),s.Ub(1,"div"),s.Ub(2,"b",16),s.fc("click",function(){s.Ac(c);const t=i.$implicit;return s.jc(2).ViewInvoice(t.Id)}),s.Kc(3),s.Tb(),s.Tb(),s.Ub(4,"div"),s.Kc(5),s.Tb(),s.Ic(6,O,2,0,"div",9),s.Ic(7,P,2,0,"button",17),s.Tb()}if(2&c){const c=i.$implicit;s.Bb(3),s.Mc("INV. ",c.invoiceNumber,""),s.Bb(2),s.Lc(c.invoiceDate),s.Bb(1),s.qc("ngIf",1==c.paid),s.Bb(1),s.qc("ngIf",0==c.paid)}}function S(c,i){if(1&c&&(s.Ub(0,"div"),s.Ub(1,"div",25),s.Ub(2,"mat-form-field",11),s.Ub(3,"mat-label"),s.Kc(4,"Choose a date"),s.Tb(),s.Pb(5,"input",26),s.Pb(6,"mat-datepicker-toggle",27),s.Pb(7,"mat-datepicker",null,28),s.Tb(),s.Ic(9,M,2,1,"div",21),s.kc(10,"searchInvoices"),s.Tb(),s.Ic(11,C,8,4,"mat-card",22),s.kc(12,"searchInvoices"),s.Tb()),2&c){const c=s.yc(8),i=s.jc();s.Bb(5),s.qc("matDatepicker",c),s.Bb(1),s.qc("for",c),s.Bb(3),s.qc("ngForOf",i.GetTotalInvoices(s.nc(10,4,i.invoiceList,i.Date,i.searchBy))),s.Bb(2),s.qc("ngForOf",s.nc(12,8,i.invoiceList,i.Date,i.searchBy))}}function G(c,i){if(1&c&&(s.Ub(0,"mat-option",23),s.Kc(1),s.Tb()),2&c){const c=i.$implicit;s.qc("value",c.Id),s.Bb(1),s.Mc(" ",c.name," ")}}function D(c,i){if(1&c&&(s.Ub(0,"div"),s.Kc(1),s.Tb()),2&c){const c=s.jc().$implicit;s.Bb(1),s.Mc("Total Invoices: ",c,"")}}function R(c,i){if(1&c&&(s.Ub(0,"div"),s.Ic(1,D,2,1,"div",9),s.Tb()),2&c){const c=i.$implicit;s.Bb(1),s.qc("ngIf",0!=c)}}function A(c,i){1&c&&(s.Ub(0,"div"),s.Kc(1," Payment Recieved "),s.Tb())}function E(c,i){if(1&c){const c=s.Vb();s.Ub(0,"button",18),s.fc("click",function(){s.Ac(c);const i=s.jc().$implicit;return s.jc(2).PaymentRecieved(i.Id)}),s.Kc(1,"Mark as Paid"),s.Tb()}}function x(c,i){if(1&c){const c=s.Vb();s.Ub(0,"mat-card",24),s.Ub(1,"div"),s.Ub(2,"b",16),s.fc("click",function(){s.Ac(c);const t=i.$implicit;return s.jc(2).ViewInvoice(t.Id)}),s.Kc(3),s.Tb(),s.Tb(),s.Ub(4,"div"),s.Kc(5),s.Tb(),s.Ic(6,A,2,0,"div",9),s.Ic(7,E,2,0,"button",17),s.Tb()}if(2&c){const c=i.$implicit;s.Bb(3),s.Mc("INV. ",c.invoiceNumber,""),s.Bb(2),s.Lc(c.invoiceDate),s.Bb(1),s.qc("ngIf",1==c.paid),s.Bb(1),s.qc("ngIf",0==c.paid)}}function J(c,i){if(1&c&&(s.Ub(0,"div"),s.Ub(1,"div",25),s.Ub(2,"mat-form-field",11),s.Ub(3,"mat-label"),s.Kc(4,"Customer"),s.Tb(),s.Ub(5,"mat-select",29),s.Ic(6,G,2,2,"mat-option",20),s.Tb(),s.Tb(),s.Ic(7,R,2,1,"div",21),s.kc(8,"searchInvoices"),s.Tb(),s.Ic(9,x,8,4,"mat-card",22),s.kc(10,"searchInvoices"),s.Tb()),2&c){const c=s.jc();s.Bb(6),s.qc("ngForOf",c.customerList),s.Bb(1),s.qc("ngForOf",c.GetTotalInvoices(s.nc(8,3,c.invoiceList,c.CustomerId,c.searchBy))),s.Bb(2),s.qc("ngForOf",s.nc(10,7,c.invoiceList,c.CustomerId,c.searchBy))}}function W(c,i){if(1&c&&(s.Ub(0,"mat-option",23),s.Kc(1),s.Tb()),2&c){const c=i.$implicit;s.qc("value",c.Id),s.Bb(1),s.Mc(" ",c.name," ")}}function X(c,i){if(1&c&&(s.Ub(0,"div"),s.Kc(1),s.Tb()),2&c){const c=s.jc().$implicit;s.Bb(1),s.Mc("Total Invoices: ",c,"")}}function H(c,i){if(1&c&&(s.Ub(0,"div"),s.Ic(1,X,2,1,"div",9),s.Tb()),2&c){const c=i.$implicit;s.Bb(1),s.qc("ngIf",0!=c)}}function z(c,i){1&c&&(s.Ub(0,"div"),s.Kc(1," Payment Recieved "),s.Tb())}function Q(c,i){if(1&c){const c=s.Vb();s.Ub(0,"button",18),s.fc("click",function(){s.Ac(c);const i=s.jc().$implicit;return s.jc(2).PaymentRecieved(i.Id)}),s.Kc(1,"Mark as Paid"),s.Tb()}}function _(c,i){if(1&c){const c=s.Vb();s.Ub(0,"mat-card",24),s.Ub(1,"div"),s.Ub(2,"b",16),s.fc("click",function(){s.Ac(c);const t=i.$implicit;return s.jc(2).ViewInvoice(t.Id)}),s.Kc(3),s.Tb(),s.Tb(),s.Ub(4,"div"),s.Kc(5),s.Tb(),s.Ic(6,z,2,0,"div",9),s.Ic(7,Q,2,0,"button",17),s.Tb()}if(2&c){const c=i.$implicit;s.Bb(3),s.Mc("INV. ",c.invoiceNumber,""),s.Bb(2),s.Lc(c.invoiceDate),s.Bb(1),s.qc("ngIf",1==c.paid),s.Bb(1),s.qc("ngIf",0==c.paid)}}function Y(c,i){if(1&c&&(s.Ub(0,"div"),s.Ub(1,"div",25),s.Ub(2,"mat-form-field",11),s.Ub(3,"mat-label"),s.Kc(4,"Business"),s.Tb(),s.Ub(5,"mat-select",30),s.Ic(6,W,2,2,"mat-option",20),s.Tb(),s.Tb(),s.Ic(7,H,2,1,"div",21),s.kc(8,"searchInvoices"),s.Tb(),s.Ic(9,_,8,4,"mat-card",22),s.kc(10,"searchInvoices"),s.Tb()),2&c){const c=s.jc();s.Bb(6),s.qc("ngForOf",c.businessList),s.Bb(1),s.qc("ngForOf",c.GetTotalInvoices(s.nc(8,3,c.invoiceList,c.BusinessId,c.searchBy))),s.Bb(2),s.qc("ngForOf",s.nc(10,7,c.invoiceList,c.BusinessId,c.searchBy))}}function Z(c,i){if(1&c&&(s.Ub(0,"mat-option",23),s.Kc(1),s.Tb()),2&c){const c=i.$implicit;s.qc("value",c.value),s.Bb(1),s.Mc(" ",c.viewValue," ")}}function cc(c,i){if(1&c&&(s.Ub(0,"div"),s.Kc(1),s.Tb()),2&c){const c=s.jc().$implicit;s.Bb(1),s.Mc("Total Invoices: ",c,"")}}function ic(c,i){if(1&c&&(s.Ub(0,"div"),s.Ic(1,cc,2,1,"div",9),s.Tb()),2&c){const c=i.$implicit;s.Bb(1),s.qc("ngIf",0!=c)}}function tc(c,i){1&c&&(s.Ub(0,"div"),s.Kc(1," Payment Recieved "),s.Tb())}function ec(c,i){if(1&c){const c=s.Vb();s.Ub(0,"button",18),s.fc("click",function(){s.Ac(c);const i=s.jc().$implicit;return s.jc(2).PaymentRecieved(i.Id)}),s.Kc(1,"Mark as Paid"),s.Tb()}}function nc(c,i){if(1&c){const c=s.Vb();s.Ub(0,"mat-card",24),s.Ub(1,"div"),s.Ub(2,"b",16),s.fc("click",function(){s.Ac(c);const t=i.$implicit;return s.jc(2).ViewInvoice(t.Id)}),s.Kc(3),s.Tb(),s.Tb(),s.Ub(4,"div"),s.Kc(5),s.Tb(),s.Ic(6,tc,2,0,"div",9),s.Ic(7,ec,2,0,"button",17),s.Tb()}if(2&c){const c=i.$implicit;s.Bb(3),s.Mc("INV. ",c.invoiceNumber,""),s.Bb(2),s.Lc(c.invoiceDate),s.Bb(1),s.qc("ngIf",1==c.paid),s.Bb(1),s.qc("ngIf",0==c.paid)}}function oc(c,i){if(1&c&&(s.Ub(0,"div"),s.Ub(1,"div",25),s.Ub(2,"mat-form-field",11),s.Ub(3,"mat-label"),s.Kc(4,"Invoice Type"),s.Tb(),s.Ub(5,"mat-select",31),s.Ic(6,Z,2,2,"mat-option",20),s.Tb(),s.Tb(),s.Ic(7,ic,2,1,"div",21),s.kc(8,"searchInvoices"),s.Tb(),s.Ic(9,nc,8,4,"mat-card",22),s.kc(10,"searchInvoices"),s.Tb()),2&c){const c=s.jc();s.Bb(6),s.qc("ngForOf",c.constants.invoiceTypes),s.Bb(1),s.qc("ngForOf",c.GetTotalInvoices(s.nc(8,3,c.invoiceList,c.InvoiceType,c.searchBy))),s.Bb(2),s.qc("ngForOf",s.nc(10,7,c.invoiceList,c.InvoiceType,c.searchBy))}}let sc=(()=>{class c{constructor(c,i,t,e){this.formBuilder=c,this.constants=i,this.db=t,this.toastService=e,this.invoiceList=[],this.customerList=[],this.businessList=[],this.searchBy=o.c.InvoiceNumber}ngOnInit(){this.InitForm(),this.GetInvoices(),this.GetCustomers(),this.GetBusinesses()}GetTotalInvoices(c){return[c.length]}InitForm(){this.searchInvoiceForm=this.formBuilder.group({invoiceNumber:[],invoiceType:[],date:[],customerId:[],businessId:[],paymentStatus:[]})}PaymentRecieved(c){return Object(n.a)(this,void 0,void 0,function*(){})}get InvoiceNumber(){return this.searchInvoiceForm.get("invoiceNumber").value}get InvoiceType(){return this.searchInvoiceForm.get("invoiceType").value}get Date(){return this.searchInvoiceForm.get("date").value}get CustomerId(){return this.searchInvoiceForm.get("customerId").value}get BusinessId(){return this.searchInvoiceForm.get("businessId").value}get PaymentStatus(){return this.searchInvoiceForm.get("paymentStatus").value}GetInvoices(){return Object(n.a)(this,void 0,void 0,function*(){try{this.invoiceList=yield this.db.getInvoices()}catch(c){this.toastService.showError(c)}})}GetCustomers(){return Object(n.a)(this,void 0,void 0,function*(){try{this.customerList=yield this.db.getCustomers()}catch(c){this.toastService.showError(c)}})}GetBusinesses(){return Object(n.a)(this,void 0,void 0,function*(){try{this.businessList=yield this.db.getBusinesses()}catch(c){this.toastService.showError(c)}})}ViewInvoice(c){return Object(n.a)(this,void 0,void 0,function*(){try{const i=yield this.db.getInvoice(c);console.log("\ud83d\ude80 - file: view-invoices.component.ts - line 116 - ViewInvoicesComponent - ViewInvoice - invoice",i);const t=new Uint8Array(i.invoice.data);console.log("\ud83d\ude80 - file: view-invoices.component.ts - line 119 - ViewInvoicesComponent - ViewInvoice - uint",t);const e=new Blob([t.buffer],{type:"application/pdf"});console.log("\ud83d\ude80 - file: view-invoices.component.ts - line 119 - ViewInvoicesComponent - ViewInvoice - blob",e);const n=window.URL.createObjectURL(e);window.open(n,"_blank")}catch(i){this.toastService.showError(i)}})}}return c.\u0275fac=function(i){return new(i||c)(s.Ob(b.e),s.Ob(a.a),s.Ob(r.a),s.Ob(u.a))},c.\u0275cmp=s.Ib({type:c,selectors:[["ng-component"]],decls:23,vars:8,consts:[[1,"m-2","p-4"],[1,"d-flex","justify-content-evenly","p-5","pb-3","pt-0",3,"ngModel","ngModelChange"],["value","invoiceNumber"],["value","date"],["value","paymentStatus"],["value","customer"],["value","business"],["value","invoiceType"],[3,"formGroup"],[4,"ngIf"],[1,"p-2","ps-5"],[1,"w-25"],["matPrefix",""],["matInput","","formControlName","invoiceNumber"],["class","m-2 p-1 w-25 shadow",4,"ngFor","ngForOf"],[1,"m-2","p-1","w-25","shadow"],[1,"me-4",3,"click"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","color","primary",3,"click"],["formControlName","paymentStatus"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","m-1 p-1 d-flex justify-content-between",4,"ngFor","ngForOf"],[3,"value"],[1,"m-1","p-1","d-flex","justify-content-between"],[1,"p-2","ps-5","pe-5","d-flex","justify-content-between","align-items-center"],["matInput","","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","customerId"],["formControlName","businessId"],["formControlName","invoiceType"]],template:function(c,i){1&c&&(s.Ub(0,"mat-card",0),s.Ub(1,"mat-radio-group",1),s.fc("ngModelChange",function(c){return i.searchBy=c}),s.Ub(2,"div"),s.Kc(3,"Search By:"),s.Tb(),s.Ub(4,"mat-radio-button",2),s.Kc(5,"Invoice Number"),s.Tb(),s.Ub(6,"mat-radio-button",3),s.Kc(7,"Date"),s.Tb(),s.Ub(8,"mat-radio-button",4),s.Kc(9,"Payment Status"),s.Tb(),s.Ub(10,"mat-radio-button",5),s.Kc(11,"Customer"),s.Tb(),s.Ub(12,"mat-radio-button",6),s.Kc(13,"Business"),s.Tb(),s.Ub(14,"mat-radio-button",7),s.Kc(15,"Invoice Type"),s.Tb(),s.Tb(),s.Ub(16,"form",8),s.Ic(17,k,10,5,"div",9),s.Ic(18,$,11,11,"div",9),s.Ic(19,S,13,12,"div",9),s.Ic(20,J,11,11,"div",9),s.Ic(21,Y,11,11,"div",9),s.Ic(22,oc,11,11,"div",9),s.Tb(),s.Tb()),2&c&&(s.Bb(1),s.qc("ngModel",i.searchBy),s.Bb(15),s.qc("formGroup",i.searchInvoiceForm),s.Bb(1),s.qc("ngIf","invoiceNumber"==i.searchBy),s.Bb(1),s.qc("ngIf","paymentStatus"==i.searchBy),s.Bb(1),s.qc("ngIf","date"==i.searchBy),s.Bb(1),s.qc("ngIf","customer"==i.searchBy),s.Bb(1),s.qc("ngIf","business"==i.searchBy),s.Bb(1),s.qc("ngIf","invoiceType"==i.searchBy))},directives:[v.a,f.b,b.o,b.r,f.a,b.y,b.p,b.i,d.l,m.b,m.e,m.f,l.b,b.c,b.h,d.k,I.a,p.a,T.k,h.b,h.d,m.g,h.a],pipes:[U],styles:[""]}),c})();const bc=[{path:"",component:sc,data:{title:"View Invoices"}}];let ac=(()=>{class c{}return c.\u0275mod=s.Mb({type:c}),c.\u0275inj=s.Lb({factory:function(i){return new(i||c)},imports:[[e.f.forChild(bc)],e.f]}),c})();var rc=t("rhD1");let uc=(()=>{class c{}return c.\u0275mod=s.Mb({type:c}),c.\u0275inj=s.Lb({factory:function(i){return new(i||c)},providers:[],imports:[[ac,d.c,rc.a,b.k,b.u]]}),c})()}}]);